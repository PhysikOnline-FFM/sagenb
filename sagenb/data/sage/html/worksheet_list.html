{% extends 'html/base.html' %}

{% block head %}
	{{ super() }}
	<style type="text/css">
		.container {
			width: 1170px; /* vorher 700 px */
		}
		.navbar .btn-navbar {
			display: none;
		}

        .input-append {
            position: relative;
        }
        #search_clear {
            position: absolute;
            z-index: 999;
            top: 24%;
            left: 72%;
            height: 14px;
            width: 14px;
            cursor: pointer;
            display: inline-block;
            margin-top: 1px;
            background-image: url("/data/sage/images/search-x.png");
            background-repeat: no-repeat;
        }
        .worksheet_name_cell a {
            font-size: 140%;
        }
        .worksheet_name_cell ul a {
            font-size: 100%;
		}
		/* Nachfolgendes sollte wohl besser in die TagIt css verschoben werden */
/*        .tagit-new {
            background-image: url("../../data/bootstrap-2.3.1/img/glyphicons-halflings.png");
            background-repeat: no-repeat;
			background-position: 0 -96px;
            width: 14px;
            height: 14px;
			cursor: pointer;
		  }
*/
		.tagit {
				border: solid thin black;
		}
	</style>

	<!-- TagIt -->
	<link href="/data/jquery/plugins/tagit/jquery.tagit.css" rel="stylesheet" type="text/css">
	<link href="/data/jquery/plugins/tagit/tagit.ui-sage.css" rel="stylesheet" type="text/css">
{% endblock head %}

{% block navbar %}
{% endblock navbar %}

{% block alerts %}
	{% include 'html/alerts/worksheet_locked_alert.html' %}
	{% include 'html/alerts/rename_alert.html' %}
{% endblock alerts %}

{% block before_page %}
{% endblock before_page %}


{% block page %}
	<h1 class="title"></h1>

	<div style="height: 10px;"></div>

	{% if not published_mode %}
	<div class="btn-toolbar well" id="top_toolbar">
		<a href="/new_worksheet" class="btn btn-primary"><i class="icon-file icon-white"></i> {{ gettext("New Worksheet") }}</a>
		<a href="#import_modal" class="btn" data-toggle="modal"><i class="icon-upload"></i> {{ gettext("Upload") }}</a>
		<a href="/download_worksheets.zip" class="btn"><i class="icon-download"></i> {{ gettext("Download All Active") }}</a>
	</div>
	{% else %}
		{# im "Published Worksheets"-Modus, also anonym #}
		<p class="pokal">
			Diese Seite enthält eine Liste von Arbeitsblättern (Worksheets), die von
			anderen Benutzern der POKAL-Plattform erstellt wurden. Sie eignet sich zum
			gefahrlosen Entdecken der Funktionen von POKAL. Als <a href="/login">eingeloggter Benutzer</a>
			besteht die Möglichkeit, auf diesen Arbeitsblättern aufzubauen.
		</p>
	{% endif %}

	<div class="btn-toolbar" id="bottom_toolbar">
		{% if not published_mode %}
		<div class="btn-group pull-left" id="actions_menu">
			<button class="btn dropdown-toggle span2" data-toggle="dropdown">{{ gettext("Action") }} <span class="caret"></span></button>
			<ul class="dropdown-menu">
				<li><a href="#" class="disabled" id="send_to_archive_button"><i class="icon-folder-close"></i> {{ gettext("Archive") }}</a></li>
				<li><a href="#" class="disabled" id="unarchive_button"><i class="icon-folder-open"></i> {{ gettext("Unarchive") }}</a></li>
				<li><a href="#" class="disabled" id="delete_button"><i class="icon-trash"></i> {{ gettext("Delete") }}</a></li>
				<li><a href="#" class="disabled" id="undelete_button"><i class="icon-ok"></i> {{ gettext("Undelete") }}</a></li>
				<li><a href="#" class="disabled" id="duplicate_button"><i class="icon-file"></i> {{ gettext("Duplicate") }}</a></li>
				<li><a href="#" class="disabled" id="stop_button"><i class="icon-stop"></i> {{ gettext("Stop") }}</a></li>
				<li><a href="#" class="disabled" id="download_button"><i class="icon-download"></i> {{ gettext("Download") }}</a></li>
				<li class="divider"></li>
				<li><a href="#" class="disabled" id="empty_trash"><i class="icon-exclamation-sign"></i> {{ gettext("Empty Trash") }}</a></li>
			</ul>
		</div>
		
		<div class="btn-group pull-left" data-toggle="buttons-radio" style="margin-left:55px;" id="type_buttons">
			<button type="button" class="btn active" id="show_active">{{ gettext("Active") }}</button>
			<button type="button" class="btn" id="show_archive">{{ gettext("Archive") }}</button>
			<button type="button" class="btn" id="show_trash">{{ gettext("Trash") }}</button>
		</div>
		{% endif %}

		<form action="#" class="form-search pull-right" style="margin-bottom:0">
			<div class="input-append">
                <input type="search" class="input-medium" placeholder="{{ gettext('Search') }}" size="12" id="search_input">
                <span id="search_clear"></span>
                <button class="btn" id="submit_search"><i class="icon-search"></i></button>
			</div>
		</form>
	</div>

	<div style="clear:both"></div>

	<table class="table table-striped worksheets_table">
		<thead>
			<tr>
				{% if not published_mode %}
				<th class="checkbox_cell"><input type="checkbox" id="main_checkbox"></th>
				{% endif %}
				<th class="worksheet_name_cell">{{ gettext("Worksheet") }}</th>
				{#<th class="tags_cell">{{ gettext("Tags") }}</th>#}
				<th>{{ gettext("Owner/Collaborators") }}</th>
				<th class="last_edit_cell">{{ gettext("Last Edited") }}</th>
			</tr>
		</thead>
		<tbody>
		</tbody>
	</table>
{% endblock page %}

{% block after_container %}
	{% include 'html/modals/sharing_modal.html' %}
	{% include 'html/modals/import_modal.html' %}
{% endblock after_container %}

{% block extra_javascript %}
	{% assets filters="rjsmin", output="webassets_generated/worksheet_list.js",
		"sage/js/worksheet_list.js"
	%}
		<script type="text/javascript" src="{{ ASSET_URL }}"></script>
	{% endassets %}
	
	<!-- jQuery UI -->
	<link rel="stylesheet" href="/data/jqueryui/css/sage/jquery-ui-1.8.11.custom.css" />
	<script type="text/javascript" src="/data/jqueryui/js/jquery-ui-1.8.11.custom.min.js"></script>
	<!-- TagIt -->
    <script src="/data/jquery/plugins/tagit/tag-it.js"></script>
	
	<script type="text/javascript">
		$(function() {
			// init notebook stuff
			sagenb.init();

			// init the worksheet list
			sagenb.worksheetlistapp.worksheet_list = new sagenb.worksheetlistapp.worksheet_list();
			{% if published_mode %}
			sagenb.worksheetlistapp.worksheet_list.published_mode = true;
			{% endif %}
			sagenb.worksheetlistapp.worksheet_list.init();
		});
	</script>
{% endblock extra_javascript %}
